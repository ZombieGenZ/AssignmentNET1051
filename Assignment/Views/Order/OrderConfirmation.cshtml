@model Assignment.Models.Order
@using Assignment.Enums

@{
    ViewData["Title"] = "Đặt Hàng Thành Công";
}

<div class="container my-5 text-center">
    <div class="py-5">
        <i class="fas fa-check-circle fa-5x text-success mb-3"></i>
        <h2 class="display-5">Cảm ơn bạn đã đặt hàng!</h2>
        <p class="lead">Đơn hàng của bạn đã được tiếp nhận thành công.</p>
        <p>Trạng thái hiện tại: <span class="badge bg-info fs-6">@Model.Status</span></p>
        <hr class="my-4">
        <p>Mã đơn hàng của bạn là: <strong>#@Model.Id</strong></p>
        <p>Chúng tôi sẽ xử lý đơn hàng của bạn trong thời gian sớm nhất. Bạn có thể theo dõi trạng thái đơn hàng trong phần lịch sử mua hàng.</p>

        @if (TempData["Error"] is string errorMessage && !string.IsNullOrWhiteSpace(errorMessage))
        {
            <div class="alert alert-warning mt-4" role="alert">
                <i class="fas fa-exclamation-triangle me-2"></i>@errorMessage
            </div>
        }

        @if (Model.Status == OrderStatus.Paid)
        {
            <p class="text-success mt-3"><i class="fas fa-check-circle me-2"></i>Thanh toán của bạn đã được xác nhận, chúng tôi sẽ bắt đầu xử lý đơn hàng ngay.</p>
        }
        else if (Model.Status == OrderStatus.Cancelled)
        {
            <p class="text-danger mt-3"><i class="fas fa-times-circle me-2"></i>Đơn hàng của bạn đã bị hủy. Bạn có thể đặt lại đơn hàng hoặc chọn phương thức thanh toán khác.</p>
        }
        else if (Model.PaymentType == PaymentType.PayNow && Model.PaymentMethod == PaymentMethodType.Bank)
        {
            <p class="text-info mt-3"><i class="fas fa-info-circle me-2"></i>Đơn hàng của bạn đang chờ thanh toán qua PayOS. Nếu giao dịch chưa thành công, bạn có thể thử lại từ lịch sử đơn hàng hoặc chọn phương thức khác.</p>
        }

        <div class="mt-4">
            <a href="@Url.Action("History", "Order")" class="btn btn-primary btn-lg mx-2">
                <i class="fas fa-history"></i> Xem Lịch Sử Đơn Hàng
            </a>
            <a href="@Url.Action("Index", "Home")" class="btn btn-outline-secondary btn-lg mx-2">
                <i class="fas fa-shopping-bag"></i> Tiếp Tục Mua Sắm
            </a>
        </div>
    </div>
</div>
